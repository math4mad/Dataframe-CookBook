{
  "hash": "287eae2bfead2a6bc5f464b3dded068c",
  "result": {
    "markdown": "---\ntitle: \"DataFramesMeta Tutorial\"\nauthor: \"math4mads\"\ndate: \"2023-09-14\"\ncategories: [dataframe, code,julia]\nimage: \"image.jpg\"\n---\n\n:::{.callout-note}\n   **mammal sleep  tutorial** \n:::\n\n::: {.cell execution_count=1}\n``` {.julia .cell-code}\ninclude(\"../utils.jl\")\nusing  RCall\nusing  GLMakie,DataFrames,Pipe,PrettyTables,DataFramesMeta\nusing  StatsBase,TableTransforms,Random,TimeSeries,Dates\nRandom.seed!(34343)\n```\n\n::: {.cell-output .cell-output-display execution_count=10}\n```\nTaskLocalRNG()\n```\n:::\n:::\n\n\n### 1. load data\n\n::: {.cell execution_count=2}\n``` {.julia .cell-code}\n desc=Stat2Table(1431,\"mammals\",\"sleep in mammals\",[])\n msleep=@pipe load_rda(desc.name)\n show(first(msleep,10))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n10×11 DataFrame\n Row │ species                 body_wt   brain_wt  non_dreaming  dreaming   to ⋯\n     │ Cat…                    Float64   Float64   Float64?      Float64?   Fl ⋯\n─────┼──────────────────────────────────────────────────────────────────────────\n   1 │ Africanelephant         6654.0      5712.0     missing    missing       ⋯\n   2 │ Africangiantpouchedrat     1.0         6.6           6.3        2.0\n   3 │ ArcticFox                  3.385      44.5     missing    missing   \n   4 │ Arcticgroundsquirrel       0.92        5.7     missing    missing   \n   5 │ Asianelephant           2547.0      4603.0           2.1        1.8     ⋯\n   6 │ Baboon                    10.55      179.5           9.1        0.7\n   7 │ Bigbrownbat                0.023       0.3          15.8        3.9\n   8 │ Braziliantapir           160.0       169.0           5.2        1.0\n   9 │ Cat                        3.3        25.6          10.9        3.6     ⋯\n  10 │ Chimpanzee                52.16      440.0           8.3        1.4\n                                                               6 columns omitted\n```\n:::\n:::\n\n\n### 2.  names\n\n::: {.cell execution_count=3}\n``` {.julia .cell-code}\nshow(names(msleep))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[\"species\", \"body_wt\", \"brain_wt\", \"non_dreaming\", \"dreaming\", \"total_sleep\", \"life_span\", \"gestation\", \"predation\", \"exposure\", \"danger\"]\n```\n:::\n:::\n\n\n### 3. Selecting Columns Using `@select`\n\n::: {.cell execution_count=4}\n``` {.julia .cell-code}\n@select msleep :species :total_sleep\n```\n\n::: {.cell-output .cell-output-display execution_count=13}\n```{=html}\n<div><div style = \"float: left;\"><span>62×2 DataFrame</span></div><div style = \"float: right;\"><span style = \"font-style: italic;\">37 rows omitted</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">species</th><th style = \"text-align: left;\">total_sleep</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"CategoricalArrays.CategoricalValue{String, UInt8}\" style = \"text-align: left;\">Cat…</th><th title = \"Union{Missing, Float64}\" style = \"text-align: left;\">Float64?</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: left;\">Africanelephant</td><td style = \"text-align: right;\">3.3</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: left;\">Africangiantpouchedrat</td><td style = \"text-align: right;\">8.3</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: left;\">ArcticFox</td><td style = \"text-align: right;\">12.5</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">4</td><td style = \"text-align: left;\">Arcticgroundsquirrel</td><td style = \"text-align: right;\">16.5</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5</td><td style = \"text-align: left;\">Asianelephant</td><td style = \"text-align: right;\">3.9</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">6</td><td style = \"text-align: left;\">Baboon</td><td style = \"text-align: right;\">9.8</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">7</td><td style = \"text-align: left;\">Bigbrownbat</td><td style = \"text-align: right;\">19.7</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">8</td><td style = \"text-align: left;\">Braziliantapir</td><td style = \"text-align: right;\">6.2</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">9</td><td style = \"text-align: left;\">Cat</td><td style = \"text-align: right;\">14.5</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">10</td><td style = \"text-align: left;\">Chimpanzee</td><td style = \"text-align: right;\">9.7</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">11</td><td style = \"text-align: left;\">Chinchilla</td><td style = \"text-align: right;\">12.5</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">12</td><td style = \"text-align: left;\">Cow</td><td style = \"text-align: right;\">3.9</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">13</td><td style = \"text-align: left;\">Deserthedgehog</td><td style = \"text-align: right;\">10.3</td></tr><tr><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">51</td><td style = \"text-align: left;\">Rockhyrax(Heterob)</td><td style = \"text-align: right;\">6.6</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">52</td><td style = \"text-align: left;\">Rockhyrax(Procaviahab)</td><td style = \"text-align: right;\">5.4</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">53</td><td style = \"text-align: left;\">Roedeer</td><td style = \"text-align: right;\">2.6</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">54</td><td style = \"text-align: left;\">Sheep</td><td style = \"text-align: right;\">3.8</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">55</td><td style = \"text-align: left;\">Slowloris</td><td style = \"text-align: right;\">11.0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">56</td><td style = \"text-align: left;\">Starnosedmole</td><td style = \"text-align: right;\">10.3</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">57</td><td style = \"text-align: left;\">Tenrec</td><td style = \"text-align: right;\">13.3</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">58</td><td style = \"text-align: left;\">Treehyrax</td><td style = \"font-style: italic; text-align: right;\">5.4</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">59</td><td style = \"text-align: left;\">Treeshrew</td><td style = \"text-align: right;\">15.8</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">60</td><td style = \"text-align: left;\">Vervet</td><td style = \"text-align: right;\">10.3</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">61</td><td style = \"text-align: left;\">Wateropossum</td><td style = \"text-align: right;\">19.4</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">62</td><td style = \"text-align: left;\">Yellow-belliedmarmot</td><td style = \"text-align: right;\">missing</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n### 4. `rsubset`\n\n::: {.cell execution_count=5}\n``` {.julia .cell-code}\n@rsubset msleep :total_sleep > 16\n```\n\n::: {.cell-output .cell-output-display execution_count=14}\n```{=html}\n<div><div style = \"float: left;\"><span>8×11 DataFrame</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">species</th><th style = \"text-align: left;\">body_wt</th><th style = \"text-align: left;\">brain_wt</th><th style = \"text-align: left;\">non_dreaming</th><th style = \"text-align: left;\">dreaming</th><th style = \"text-align: left;\">total_sleep</th><th style = \"text-align: left;\">life_span</th><th style = \"text-align: left;\">gestation</th><th style = \"text-align: left;\">predation</th><th style = \"text-align: left;\">exposure</th><th style = \"text-align: left;\">danger</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"CategoricalArrays.CategoricalValue{String, UInt8}\" style = \"text-align: left;\">Cat…</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Union{Missing, Float64}\" style = \"text-align: left;\">Float64?</th><th title = \"Union{Missing, Float64}\" style = \"text-align: left;\">Float64?</th><th title = \"Union{Missing, Float64}\" style = \"text-align: left;\">Float64?</th><th title = \"Union{Missing, Float64}\" style = \"text-align: left;\">Float64?</th><th title = \"Union{Missing, Float64}\" style = \"text-align: left;\">Float64?</th><th title = \"Int32\" style = \"text-align: left;\">Int32</th><th title = \"Int32\" style = \"text-align: left;\">Int32</th><th title = \"Int32\" style = \"text-align: left;\">Int32</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: left;\">Arcticgroundsquirrel</td><td style = \"text-align: right;\">0.92</td><td style = \"text-align: right;\">5.7</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">16.5</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">25.0</td><td style = \"text-align: right;\">5</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">3</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: left;\">Bigbrownbat</td><td style = \"text-align: right;\">0.023</td><td style = \"text-align: right;\">0.3</td><td style = \"text-align: right;\">15.8</td><td style = \"text-align: right;\">3.9</td><td style = \"text-align: right;\">19.7</td><td style = \"text-align: right;\">19.0</td><td style = \"text-align: right;\">35.0</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: left;\">Giantarmadillo</td><td style = \"text-align: right;\">60.0</td><td style = \"text-align: right;\">81.0</td><td style = \"text-align: right;\">12.0</td><td style = \"text-align: right;\">6.1</td><td style = \"text-align: right;\">18.1</td><td style = \"text-align: right;\">7.0</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">4</td><td style = \"text-align: left;\">Littlebrownbat</td><td style = \"text-align: right;\">0.01</td><td style = \"text-align: right;\">0.25</td><td style = \"text-align: right;\">17.9</td><td style = \"text-align: right;\">2.0</td><td style = \"text-align: right;\">19.9</td><td style = \"text-align: right;\">24.0</td><td style = \"text-align: right;\">50.0</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5</td><td style = \"text-align: left;\">NAmericanopossum</td><td style = \"text-align: right;\">1.7</td><td style = \"text-align: right;\">6.3</td><td style = \"text-align: right;\">13.8</td><td style = \"text-align: right;\">5.6</td><td style = \"text-align: right;\">19.4</td><td style = \"text-align: right;\">5.0</td><td style = \"text-align: right;\">12.0</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">6</td><td style = \"text-align: left;\">Nine-bandedarmadillo</td><td style = \"text-align: right;\">3.5</td><td style = \"text-align: right;\">10.8</td><td style = \"text-align: right;\">14.3</td><td style = \"text-align: right;\">3.1</td><td style = \"text-align: right;\">17.4</td><td style = \"text-align: right;\">6.5</td><td style = \"text-align: right;\">120.0</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">7</td><td style = \"text-align: left;\">Owlmonkey</td><td style = \"text-align: right;\">0.48</td><td style = \"text-align: right;\">15.5</td><td style = \"text-align: right;\">15.2</td><td style = \"text-align: right;\">1.8</td><td style = \"text-align: right;\">17.0</td><td style = \"text-align: right;\">12.0</td><td style = \"text-align: right;\">140.0</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">2</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">8</td><td style = \"text-align: left;\">Wateropossum</td><td style = \"text-align: right;\">3.5</td><td style = \"text-align: right;\">3.9</td><td style = \"text-align: right;\">12.8</td><td style = \"text-align: right;\">6.6</td><td style = \"text-align: right;\">19.4</td><td style = \"text-align: right;\">3.0</td><td style = \"text-align: right;\">14.0</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n### 5. using `@chain ` from `Chain.jl`\n\n::: {.cell execution_count=6}\n``` {.julia .cell-code}\n@chain msleep begin\n           @select :species :total_sleep\n           @rsubset :total_sleep > 16\n       end\n```\n\n::: {.cell-output .cell-output-display execution_count=15}\n```{=html}\n<div><div style = \"float: left;\"><span>8×2 DataFrame</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">species</th><th style = \"text-align: left;\">total_sleep</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"CategoricalArrays.CategoricalValue{String, UInt8}\" style = \"text-align: left;\">Cat…</th><th title = \"Union{Missing, Float64}\" style = \"text-align: left;\">Float64?</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: left;\">Arcticgroundsquirrel</td><td style = \"text-align: right;\">16.5</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: left;\">Bigbrownbat</td><td style = \"text-align: right;\">19.7</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: left;\">Giantarmadillo</td><td style = \"text-align: right;\">18.1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">4</td><td style = \"text-align: left;\">Littlebrownbat</td><td style = \"text-align: right;\">19.9</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5</td><td style = \"text-align: left;\">NAmericanopossum</td><td style = \"text-align: right;\">19.4</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">6</td><td style = \"text-align: left;\">Nine-bandedarmadillo</td><td style = \"text-align: right;\">17.4</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">7</td><td style = \"text-align: left;\">Owlmonkey</td><td style = \"text-align: right;\">17.0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">8</td><td style = \"text-align: left;\">Wateropossum</td><td style = \"text-align: right;\">19.4</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}