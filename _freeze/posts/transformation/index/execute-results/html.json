{
  "hash": "8b0977f3ed7eb93423394ef4a0e10e98",
  "result": {
    "markdown": "---\ntitle: \"dataset feature  transformation\"\nauthor: \"math4mads\"\ndate: \"2023-09-14\"\ncategories: [dataframe, code,julia]\nimage: \"image.jpg\"\n---\n\n:::{.callout-note title=\"简介\"}\n   **botsonhousing-price-predicting**\n\n   对各feature做不同的变换 \n\n   feature 参见 :[Applied Multivariate Statistical Analysis | SpringerLink](https://link.springer.com/book/10.1007/978-3-030-26006-4)  p51\n\n   变换方法参见 : [TableTransforms-Functional](https://juliaml.github.io/TableTransforms.jl/dev/transforms/#Functional)\n:::\n\n## 1. load package\n\n::: {.cell execution_count=1}\n``` {.julia .cell-code}\ninclude(\"../utils.jl\")   # import load_csv method\nusing  DataFrames,TableTransforms\nusing  Random\nRandom.seed!(34343)\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```\nTaskLocalRNG()\n```\n:::\n:::\n\n\n## 2. load data\n\n::: {.cell execution_count=2}\n``` {.julia .cell-code}\ndf=load_csv(\"BostonHousing\")\nfirst(df,10)\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div><div style = \"float: left;\"><span>10×14 DataFrame</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">crim</th><th style = \"text-align: left;\">zn</th><th style = \"text-align: left;\">indus</th><th style = \"text-align: left;\">chas</th><th style = \"text-align: left;\">nox</th><th style = \"text-align: left;\">rm</th><th style = \"text-align: left;\">age</th><th style = \"text-align: left;\">dis</th><th style = \"text-align: left;\">rad</th><th style = \"text-align: left;\">tax</th><th style = \"text-align: left;\">ptratio</th><th style = \"text-align: left;\">b</th><th style = \"text-align: left;\">lstat</th><th style = \"text-align: left;\">medv</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: right;\">0.00632</td><td style = \"text-align: right;\">18.0</td><td style = \"text-align: right;\">2.31</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0.538</td><td style = \"text-align: right;\">6.575</td><td style = \"text-align: right;\">65.2</td><td style = \"text-align: right;\">4.09</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">296</td><td style = \"text-align: right;\">15.3</td><td style = \"text-align: right;\">396.9</td><td style = \"text-align: right;\">4.98</td><td style = \"text-align: right;\">24.0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: right;\">0.02731</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">7.07</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0.469</td><td style = \"text-align: right;\">6.421</td><td style = \"text-align: right;\">78.9</td><td style = \"text-align: right;\">4.9671</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">242</td><td style = \"text-align: right;\">17.8</td><td style = \"text-align: right;\">396.9</td><td style = \"text-align: right;\">9.14</td><td style = \"text-align: right;\">21.6</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: right;\">0.02729</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">7.07</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0.469</td><td style = \"text-align: right;\">7.185</td><td style = \"text-align: right;\">61.1</td><td style = \"text-align: right;\">4.9671</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">242</td><td style = \"text-align: right;\">17.8</td><td style = \"text-align: right;\">392.83</td><td style = \"text-align: right;\">4.03</td><td style = \"text-align: right;\">34.7</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">4</td><td style = \"text-align: right;\">0.03237</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">2.18</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0.458</td><td style = \"text-align: right;\">6.998</td><td style = \"text-align: right;\">45.8</td><td style = \"text-align: right;\">6.0622</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">222</td><td style = \"text-align: right;\">18.7</td><td style = \"text-align: right;\">394.63</td><td style = \"text-align: right;\">2.94</td><td style = \"text-align: right;\">33.4</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5</td><td style = \"text-align: right;\">0.06905</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">2.18</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0.458</td><td style = \"text-align: right;\">7.147</td><td style = \"text-align: right;\">54.2</td><td style = \"text-align: right;\">6.0622</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">222</td><td style = \"text-align: right;\">18.7</td><td style = \"text-align: right;\">396.9</td><td style = \"text-align: right;\">5.33</td><td style = \"text-align: right;\">36.2</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">6</td><td style = \"text-align: right;\">0.02985</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">2.18</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0.458</td><td style = \"text-align: right;\">6.43</td><td style = \"text-align: right;\">58.7</td><td style = \"text-align: right;\">6.0622</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">222</td><td style = \"text-align: right;\">18.7</td><td style = \"text-align: right;\">394.12</td><td style = \"text-align: right;\">5.21</td><td style = \"text-align: right;\">28.7</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">7</td><td style = \"text-align: right;\">0.08829</td><td style = \"text-align: right;\">12.5</td><td style = \"text-align: right;\">7.87</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0.524</td><td style = \"text-align: right;\">6.012</td><td style = \"text-align: right;\">66.6</td><td style = \"text-align: right;\">5.5605</td><td style = \"text-align: right;\">5</td><td style = \"text-align: right;\">311</td><td style = \"text-align: right;\">15.2</td><td style = \"text-align: right;\">395.6</td><td style = \"text-align: right;\">12.43</td><td style = \"text-align: right;\">22.9</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">8</td><td style = \"text-align: right;\">0.14455</td><td style = \"text-align: right;\">12.5</td><td style = \"text-align: right;\">7.87</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0.524</td><td style = \"text-align: right;\">6.172</td><td style = \"text-align: right;\">96.1</td><td style = \"text-align: right;\">5.9505</td><td style = \"text-align: right;\">5</td><td style = \"text-align: right;\">311</td><td style = \"text-align: right;\">15.2</td><td style = \"text-align: right;\">396.9</td><td style = \"text-align: right;\">19.15</td><td style = \"text-align: right;\">27.1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">9</td><td style = \"text-align: right;\">0.21124</td><td style = \"text-align: right;\">12.5</td><td style = \"text-align: right;\">7.87</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0.524</td><td style = \"text-align: right;\">5.631</td><td style = \"text-align: right;\">100.0</td><td style = \"text-align: right;\">6.0821</td><td style = \"text-align: right;\">5</td><td style = \"text-align: right;\">311</td><td style = \"text-align: right;\">15.2</td><td style = \"text-align: right;\">386.63</td><td style = \"text-align: right;\">29.93</td><td style = \"text-align: right;\">16.5</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">10</td><td style = \"text-align: right;\">0.17004</td><td style = \"text-align: right;\">12.5</td><td style = \"text-align: right;\">7.87</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0.524</td><td style = \"text-align: right;\">6.004</td><td style = \"text-align: right;\">85.9</td><td style = \"text-align: right;\">6.5921</td><td style = \"text-align: right;\">5</td><td style = \"text-align: right;\">311</td><td style = \"text-align: right;\">15.2</td><td style = \"text-align: right;\">386.71</td><td style = \"text-align: right;\">17.1</td><td style = \"text-align: right;\">18.9</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n## 3. tranformation\n\n::: {.cell execution_count=3}\n``` {.julia .cell-code}\ntable=(eachcol(df))|>Functional(\n                  1=>log,\n                  2=>x->x/10,\n                  3=>log,\n                  4=>x->x,\n                  5=>log,\n                  6=>log,\n                  7=>x->(x^2.5)/10000,\n                  8=>log,\n                  9=>log,\n                  10=>log,\n                  11=>x->exp(0.4*x)/1000,\n                  12=>x->x/100,\n                  13=>x->sqrt(x),\n                  14=>log\n)\n\nfirst(table,10)\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div><div style = \"float: left;\"><span>10×14 DataFrame</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">crim</th><th style = \"text-align: left;\">zn</th><th style = \"text-align: left;\">indus</th><th style = \"text-align: left;\">chas</th><th style = \"text-align: left;\">nox</th><th style = \"text-align: left;\">rm</th><th style = \"text-align: left;\">age</th><th style = \"text-align: left;\">dis</th><th style = \"text-align: left;\">rad</th><th style = \"text-align: left;\">tax</th><th style = \"text-align: left;\">ptratio</th><th style = \"text-align: left;\">b</th><th style = \"text-align: left;\">lstat</th><th style = \"text-align: left;\">medv</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: right;\">-5.06404</td><td style = \"text-align: right;\">1.8</td><td style = \"text-align: right;\">0.837248</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">-0.619897</td><td style = \"text-align: right;\">1.88327</td><td style = \"text-align: right;\">3.43257</td><td style = \"text-align: right;\">1.40854</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">5.69036</td><td style = \"text-align: right;\">0.454865</td><td style = \"text-align: right;\">3.969</td><td style = \"text-align: right;\">2.23159</td><td style = \"text-align: right;\">3.17805</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: right;\">-3.6005</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">1.95586</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">-0.757153</td><td style = \"text-align: right;\">1.85957</td><td style = \"text-align: right;\">5.52958</td><td style = \"text-align: right;\">1.60284</td><td style = \"text-align: right;\">0.693147</td><td style = \"text-align: right;\">5.48894</td><td style = \"text-align: right;\">1.23645</td><td style = \"text-align: right;\">3.969</td><td style = \"text-align: right;\">3.02324</td><td style = \"text-align: right;\">3.07269</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: right;\">-3.60123</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">1.95586</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">-0.757153</td><td style = \"text-align: right;\">1.972</td><td style = \"text-align: right;\">2.91812</td><td style = \"text-align: right;\">1.60284</td><td style = \"text-align: right;\">0.693147</td><td style = \"text-align: right;\">5.48894</td><td style = \"text-align: right;\">1.23645</td><td style = \"text-align: right;\">3.9283</td><td style = \"text-align: right;\">2.00749</td><td style = \"text-align: right;\">3.54674</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">4</td><td style = \"text-align: right;\">-3.43052</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.779325</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">-0.780886</td><td style = \"text-align: right;\">1.94562</td><td style = \"text-align: right;\">1.41959</td><td style = \"text-align: right;\">1.80207</td><td style = \"text-align: right;\">1.09861</td><td style = \"text-align: right;\">5.40268</td><td style = \"text-align: right;\">1.77224</td><td style = \"text-align: right;\">3.9463</td><td style = \"text-align: right;\">1.71464</td><td style = \"text-align: right;\">3.50856</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5</td><td style = \"text-align: right;\">-2.67292</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.779325</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">-0.780886</td><td style = \"text-align: right;\">1.96669</td><td style = \"text-align: right;\">2.16271</td><td style = \"text-align: right;\">1.80207</td><td style = \"text-align: right;\">1.09861</td><td style = \"text-align: right;\">5.40268</td><td style = \"text-align: right;\">1.77224</td><td style = \"text-align: right;\">3.969</td><td style = \"text-align: right;\">2.30868</td><td style = \"text-align: right;\">3.58906</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">6</td><td style = \"text-align: right;\">-3.51157</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0.779325</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">-0.780886</td><td style = \"text-align: right;\">1.86097</td><td style = \"text-align: right;\">2.63995</td><td style = \"text-align: right;\">1.80207</td><td style = \"text-align: right;\">1.09861</td><td style = \"text-align: right;\">5.40268</td><td style = \"text-align: right;\">1.77224</td><td style = \"text-align: right;\">3.9412</td><td style = \"text-align: right;\">2.28254</td><td style = \"text-align: right;\">3.3569</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">7</td><td style = \"text-align: right;\">-2.42713</td><td style = \"text-align: right;\">1.25</td><td style = \"text-align: right;\">2.06306</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">-0.646264</td><td style = \"text-align: right;\">1.79376</td><td style = \"text-align: right;\">3.61981</td><td style = \"text-align: right;\">1.71569</td><td style = \"text-align: right;\">1.60944</td><td style = \"text-align: right;\">5.73979</td><td style = \"text-align: right;\">0.437029</td><td style = \"text-align: right;\">3.956</td><td style = \"text-align: right;\">3.52562</td><td style = \"text-align: right;\">3.13114</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">8</td><td style = \"text-align: right;\">-1.93413</td><td style = \"text-align: right;\">1.25</td><td style = \"text-align: right;\">2.06306</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">-0.646264</td><td style = \"text-align: right;\">1.82002</td><td style = \"text-align: right;\">9.05333</td><td style = \"text-align: right;\">1.78348</td><td style = \"text-align: right;\">1.60944</td><td style = \"text-align: right;\">5.73979</td><td style = \"text-align: right;\">0.437029</td><td style = \"text-align: right;\">3.969</td><td style = \"text-align: right;\">4.37607</td><td style = \"text-align: right;\">3.29953</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">9</td><td style = \"text-align: right;\">-1.55476</td><td style = \"text-align: right;\">1.25</td><td style = \"text-align: right;\">2.06306</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">-0.646264</td><td style = \"text-align: right;\">1.72829</td><td style = \"text-align: right;\">10.0</td><td style = \"text-align: right;\">1.80535</td><td style = \"text-align: right;\">1.60944</td><td style = \"text-align: right;\">5.73979</td><td style = \"text-align: right;\">0.437029</td><td style = \"text-align: right;\">3.8663</td><td style = \"text-align: right;\">5.47083</td><td style = \"text-align: right;\">2.80336</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">10</td><td style = \"text-align: right;\">-1.77172</td><td style = \"text-align: right;\">1.25</td><td style = \"text-align: right;\">2.06306</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">-0.646264</td><td style = \"text-align: right;\">1.79243</td><td style = \"text-align: right;\">6.83885</td><td style = \"text-align: right;\">1.88587</td><td style = \"text-align: right;\">1.60944</td><td style = \"text-align: right;\">5.73979</td><td style = \"text-align: right;\">0.437029</td><td style = \"text-align: right;\">3.8671</td><td style = \"text-align: right;\">4.13521</td><td style = \"text-align: right;\">2.93916</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}